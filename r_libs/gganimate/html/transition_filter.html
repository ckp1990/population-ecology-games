<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Transition between different filters</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for transition_filter {gganimate}"><tr><td>transition_filter {gganimate}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Transition between different filters</h2>

<h3>Description</h3>

<p>This transition allows you to transition between a range of filtering
conditions. The conditions are expressed as logical statements and rows in
the data will be retained if the statement evaluates to <code>TRUE</code>. It is
possible to keep filtered data on display by setting <code>keep = TRUE</code> which will
let data be retained as the result of the exit function. Note that if data is
kept the enter function will have no effect.
</p>


<h3>Usage</h3>

<pre>
transition_filter(
  transition_length = 1,
  filter_length = 1,
  ...,
  wrap = TRUE,
  keep = FALSE
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>transition_length</code></td>
<td>
<p>The relative length of the transition. Will be
recycled to match the number of states in the data</p>
</td></tr>
<tr valign="top"><td><code>filter_length</code></td>
<td>
<p>The relative length of the pause at the states. Will be
recycled to match the number of states in the data</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>A number of expressions to be evaluated in the context of the layer
data, returning a logical vector. If the expressions are named, the name will
be available as a frame variable.</p>
</td></tr>
<tr valign="top"><td><code>wrap</code></td>
<td>
<p>Should the animation <em>wrap-around</em>? If <code>TRUE</code> the last filter will
be transitioned into the first.</p>
</td></tr>
<tr valign="top"><td><code>keep</code></td>
<td>
<p>Should rows that evaluates to <code>FALSE</code> be kept in the data as it
looks after exit has been applied</p>
</td></tr>
</table>


<h3>Label variables</h3>

<p><code>transition_filter</code> makes the following variables available for string
literal interpretation, in addition to the general ones provided by
<code><a href="../../gganimate/help/animate.html">animate()</a></code>:
</p>

<ul>
<li> <p><strong>transitioning</strong> is a boolean indicating whether the frame is part of the
transitioning phase
</p>
</li>
<li> <p><strong>previous_filter</strong> The name of the last filter the animation was at
</p>
</li>
<li> <p><strong>closest_filter</strong> The name of the filter closest to this frame
</p>
</li>
<li> <p><strong>next_filter</strong> The name of the next filter the animation will be part of
</p>
</li>
<li> <p><strong>previous_expression</strong> The expression of the last filter the animation was at
</p>
</li>
<li> <p><strong>closest_expression</strong> The expression of the filter closest to this frame
</p>
</li>
<li> <p><strong>next_expression</strong> The expression of the next filter the animation will be part of
</p>
</li></ul>



<h3>Object permanence</h3>

<p><code>transition_filter</code> does not link rows across data to the same graphic
element, so elements will be defined uniquely by each row. If <code>keep = TRUE</code>
the rows not matching the conditions of a filter is not removed from the plot
after the exit animation, and a possible subsequent enter will begin from
the state they were left in, rather than enter anew from the state defined by
the enter function.
</p>


<h3>Computed Variables</h3>

<p>It is possible to use variables calculated by the statistic to define the
transition. Simply inclose the variable in <code>stat()</code> in the same way as when
using computed variables in aesthetics.
</p>


<h3>See Also</h3>

<p>Other transitions: 
<code><a href="../../gganimate/help/transition_components.html">transition_components</a>()</code>,
<code><a href="../../gganimate/help/transition_events.html">transition_events</a>()</code>,
<code><a href="../../gganimate/help/transition_layers.html">transition_layers</a>()</code>,
<code><a href="../../gganimate/help/transition_manual.html">transition_manual</a>()</code>,
<code><a href="../../gganimate/help/transition_null.html">transition_null</a>()</code>,
<code><a href="../../gganimate/help/transition_reveal.html">transition_reveal</a>()</code>,
<code><a href="../../gganimate/help/transition_states.html">transition_states</a>()</code>,
<code><a href="../../gganimate/help/transition_time.html">transition_time</a>()</code>
</p>


<h3>Examples</h3>

<pre>
anim &lt;- ggplot(iris, aes(Petal.Width, Petal.Length, colour = Species)) +
  geom_point() +
  transition_filter(
    transition_length = 2,
    filter_length = 1,
    Setosa = Species == 'setosa',
    Long = Petal.Length &gt; 4,
    Wide = Petal.Width &gt; 2
  ) +
  ggtitle(
    'Filter: {closest_filter}',
    subtitle = '{closest_expression}'
  ) +
  enter_fade() +
  exit_fly(y_loc = 0)

# Setting `keep = TRUE` allows you to keep the culled data on display. Only
# exit functions will be used in that case (as elements enters from the
# result of the exit function)
anim2 &lt;- ggplot(iris, aes(Petal.Width, Petal.Length, colour = Species)) +
  geom_point() +
  transition_filter(
    transition_length = 2,
    filter_length = 1,
    Setosa = Species == 'setosa',
    Long = Petal.Length &gt; 4,
    Wide = Petal.Width &gt; 2,
    keep = TRUE
  ) +
  ggtitle(
    'Filter: {closest_filter}',
    subtitle = '{closest_expression}'
  ) +
  exit_recolour(colour = 'grey') +
  exit_shrink(size = 0.5)

</pre>

<hr /><div style="text-align: center;">[Package <em>gganimate</em> version 1.0.8 <a href="00Index.html">Index</a>]</div>
</body></html>
